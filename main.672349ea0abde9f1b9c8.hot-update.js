webpackHotUpdate("main",{

/***/ "./src/index.ts":
/*!**********************!*\
  !*** ./src/index.ts ***!
  \**********************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\r\nvar _a, _b, _c, _d;\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst PIXI = __webpack_require__(/*! pixi.js */ \"./node_modules/pixi.js/lib/pixi.es.js\");\r\nvar throttle = __webpack_require__(/*! lodash.throttle */ \"./node_modules/lodash.throttle/index.js\");\r\nconst TWEEN = __webpack_require__(/*! @tweenjs/tween.js */ \"./node_modules/@tweenjs/tween.js/dist/tween.esm.js\");\r\nlet docksState = [\r\n    {\r\n        id: 1,\r\n        name: \"dock1\",\r\n        filled: false,\r\n        berthCoordinates: { x: 30, y: 105 },\r\n        isBusy: false\r\n    },\r\n    {\r\n        id: 2,\r\n        name: \"dock2\",\r\n        filled: false,\r\n        berthCoordinates: { x: 30, y: 225 },\r\n        isBusy: false\r\n    },\r\n    {\r\n        id: 3,\r\n        name: \"dock3\",\r\n        filled: false,\r\n        berthCoordinates: { x: 30, y: 345 },\r\n        isBusy: false\r\n    },\r\n    {\r\n        id: 4,\r\n        name: \"dock4\",\r\n        filled: false,\r\n        berthCoordinates: { x: 30, y: 465 },\r\n        isBusy: false\r\n    }\r\n];\r\nlet shipsState = [];\r\nfunction getDock(filled) {\r\n    const dock = docksState.filter(e => !e.isBusy);\r\n    // console.log('dockIsBusy:', dock.length);\r\n    if (dock.length > 0) {\r\n        const currentDock = filled ? dock.find(e => e.filled === false) : dock.find(e => e.filled === true);\r\n        // console.log('currentDock:', currentDock);\r\n        docksState = docksState.map(e => { if (e.id === (currentDock === null || currentDock === void 0 ? void 0 : currentDock.id)) {\r\n            return Object.assign(Object.assign({}, currentDock), { isBusy: true });\r\n        }\r\n        else\r\n            return e; });\r\n        return currentDock;\r\n    }\r\n    else {\r\n        return undefined;\r\n    }\r\n}\r\n// function testForAABB(object1: PIXI.Graphics, object2: PIXI.Graphics) {\r\n//     const bounds1 = object1.getBounds();\r\n//     const bounds2 = object2.getBounds();\r\n//     return bounds1.x < bounds2.x + bounds2.width + 1\r\n//         && bounds1.x + bounds1.width + 1 > bounds2.x\r\n//         && bounds1.y < bounds2.y + bounds2.height\r\n//         && bounds1.y + bounds1.height > bounds2.y;\r\n// }\r\nlet app = new PIXI.Application({ width: 800, height: 600, backgroundColor: 0x3a56f2 });\r\ndocument.body.appendChild(app.view);\r\nconst dock1 = new PIXI.Graphics();\r\ndock1.lineStyle(5, 0xe3e344, 1);\r\ndock1.beginFill(((_a = docksState.find(e => e.id === 1)) === null || _a === void 0 ? void 0 : _a.filled) ? 0xe3e344 : 0x3a56f2);\r\ndock1.drawRect(3, 2, 25, 100);\r\ndock1.y = 70;\r\ndock1.endFill();\r\napp.stage.addChild(dock1);\r\nconst dock2 = new PIXI.Graphics();\r\ndock2.lineStyle(5, 0xe3e344, 1);\r\ndock2.beginFill(((_b = docksState.find(e => e.id === 2)) === null || _b === void 0 ? void 0 : _b.filled) ? 0xe3e344 : 0x3a56f2);\r\ndock2.drawRect(3, 2, 25, 100);\r\ndock2.y = 190;\r\ndock2.endFill();\r\napp.stage.addChild(dock2);\r\nconst dock3 = new PIXI.Graphics();\r\ndock3.lineStyle(5, 0xe3e344, 1);\r\ndock3.beginFill(((_c = docksState.find(e => e.id === 3)) === null || _c === void 0 ? void 0 : _c.filled) ? 0xe3e344 : 0x3a56f2);\r\ndock3.drawRect(3, 2, 25, 100);\r\ndock3.y = 310;\r\ndock3.endFill();\r\napp.stage.addChild(dock3);\r\nconst dock4 = new PIXI.Graphics();\r\ndock4.lineStyle(5, 0xe3e344, 1);\r\ndock4.beginFill(((_d = docksState.find(e => e.id === 4)) === null || _d === void 0 ? void 0 : _d.filled) ? 0xe3e344 : 0x3a56f2);\r\ndock4.drawRect(3, 2, 25, 100);\r\ndock4.y = 430;\r\ndock4.endFill();\r\napp.stage.addChild(dock4);\r\nconst wall_1 = new PIXI.Graphics();\r\nwall_1.lineStyle(0, 0xe3e344, 1);\r\nwall_1.beginFill(0xe3e344);\r\nwall_1.drawRect(200, 0, 10, 200);\r\nwall_1.endFill();\r\napp.stage.addChild(wall_1);\r\nconst wall_2 = new PIXI.Graphics();\r\nwall_2.lineStyle(0, 0xe3e344, 1);\r\nwall_2.beginFill(0xe3e344);\r\nwall_2.drawRect(200, 400, 10, 200);\r\nwall_2.endFill();\r\napp.stage.addChild(wall_2);\r\nfunction onShipWithLine(ship, dock, shipFilled, red, green) {\r\n    const coordsC = { x: 220, y: shipFilled ? 220 : 350 };\r\n    const tweenC = new TWEEN.Tween(coordsC)\r\n        .to({ x: 30, y: dock.id * 105 + ((dock.id - 1) * 15) }, 4000)\r\n        .onUpdate(() => {\r\n        ship.x = coordsC.x, ship.y = coordsC.y;\r\n    })\r\n        .onComplete(() => {\r\n        console.log('onComplete');\r\n        // dockCoord = docks[dock.id - 1].berthCoordinates\r\n        shipFilled ? overload(red, shipFilled) : overload(green, shipFilled);\r\n        tweenD.delay(5000);\r\n        setTimeout(() => {\r\n            if (shipFilled) {\r\n                docksState.forEach(e => { if (e.id === dock.id) {\r\n                    e.filled = true;\r\n                    e.isBusy = false;\r\n                } });\r\n            }\r\n            else {\r\n                docksState.forEach(e => { if (e.id === dock.id) {\r\n                    e.filled = false;\r\n                    e.isBusy = false;\r\n                } });\r\n            }\r\n            switch (dock.id) {\r\n                case 1:\r\n                    shipFilled ? dock1.tint = 0xe3e344 : dock1.tint = 0xffffff;\r\n                    break;\r\n                case 2:\r\n                    shipFilled ? dock2.tint = 0xe3e344 : dock2.tint = 0xffffff;\r\n                    break;\r\n                case 3:\r\n                    shipFilled ? dock3.tint = 0xe3e344 : dock3.tint = 0xffffff;\r\n                    break;\r\n                case 4:\r\n                    shipFilled ? dock4.tint = 0xe3e344 : dock4.tint = 0xffffff;\r\n                    break;\r\n                default:\r\n                    break;\r\n            }\r\n        }, 5000);\r\n    });\r\n    const coordsD = { x: 30, y: dock.id * 105 + ((dock.id - 1) * 15) };\r\n    const tweenD = new TWEEN.Tween(coordsD)\r\n        .to({ x: 170, y: 295 }, 2000)\r\n        .onUpdate(() => {\r\n        ship.x = coordsD.x, ship.y = coordsD.y;\r\n    });\r\n    const coordsE = { x: 170, y: 295 };\r\n    const tweenE = new TWEEN.Tween(coordsE)\r\n        .to({ x: 810, y: 295 }, 4000)\r\n        .onUpdate(() => {\r\n        ship.x = coordsE.x, ship.y = coordsE.y;\r\n    });\r\n    // tweenB.chain(tweenC)\r\n    tweenC.chain(tweenD);\r\n    tweenD.chain(tweenE);\r\n    tweenC.start();\r\n}\r\nfunction changePlaceInLine(ship, shipObj) {\r\n    shipsState.forEach(e => { if (e.id === shipObj.id) {\r\n        e.numberInLine = shipObj.numberInLine - 1;\r\n    } });\r\n    const coordsA = { x: shipObj.numberInLine * 80 + 220 };\r\n    const tweenA = new TWEEN.Tween(coordsA)\r\n        .to({ x: (shipObj.numberInLine * 80 + 220) - 80 }, 1000)\r\n        .onUpdate(() => {\r\n        ship.x = coordsA.x;\r\n    }).delay(1000).onComplete(() => {\r\n    });\r\n    tweenA.start();\r\n}\r\nfunction overload(params, filled) {\r\n    const size = { s: filled ? 60 : 0 };\r\n    const tween = new TWEEN.Tween(size) // Create a new tween that modifies 'coords'.\r\n        .to({ s: filled ? 0 : 60 }, 5000) // Move to (300, 200) in 1 second.\r\n        .onUpdate(() => {\r\n        params.width = size.s;\r\n    });\r\n    tween.start();\r\n}\r\nfunction createStartShip() {\r\n    const filled = !!Math.round(Math.random());\r\n    const shipId = shipsState.length + 1;\r\n    const dock = getDock(filled);\r\n    const shipElement = new PIXI.Container();\r\n    shipElement.position = new PIXI.Point(810, 300);\r\n    app.stage.addChild(shipElement);\r\n    const empty_Green = PIXI.Sprite.from('../assets/images/green-ship-empty.png');\r\n    empty_Green.width = 60;\r\n    empty_Green.height = 30;\r\n    const full_Green = PIXI.Sprite.from('../assets/images/green-ship-full.png');\r\n    full_Green.width = 0;\r\n    full_Green.height = 30;\r\n    const empty_Red = PIXI.Sprite.from('../assets/images/red-ship-empty.png');\r\n    empty_Red.width = 60;\r\n    empty_Red.height = 30;\r\n    const full_Red = PIXI.Sprite.from('../assets/images/red-ship-full.png');\r\n    full_Red.width = 60;\r\n    full_Red.height = 30;\r\n    if (filled) {\r\n        shipElement.addChild(empty_Red);\r\n        shipElement.addChild(full_Red);\r\n    }\r\n    else {\r\n        shipElement.addChild(empty_Green);\r\n        shipElement.addChild(full_Green);\r\n    }\r\n    const currentShip = {\r\n        id: shipId,\r\n        filled: filled,\r\n        color: filled ? 'red' : 'green',\r\n        waiting: !dock,\r\n        numberInLine: !!dock ? 0 : shipsState.filter(ship => ship.waiting == true && ship.filled === filled).length + 1,\r\n        shipContainer: shipElement\r\n    };\r\n    // console.table(currentShip)\r\n    shipsState.push(currentShip);\r\n    // console.log('getInLine(filled):', getInLine(filled));\r\n    // console.log('shipsState-waiting:', shipsState.filter(ship => ship.waiting).length);\r\n    // console.log(!!dock);\r\n    if (!!dock) {\r\n        const coordsA = { x: 810, y: 260 }; // Start at (0, 0)\r\n        const tweenA = new TWEEN.Tween(coordsA) // Create a new tween that modifies 'coords'.\r\n            .to({ x: 210, y: 260 }, 6000) // Move to (300, 200) in 1 second.\r\n            // .easing(TWEEN.Easing.Quadratic.Out)\r\n            .onUpdate(() => {\r\n            shipElement.x = coordsA.x, shipElement.y = coordsA.y;\r\n        });\r\n        const coordsB = { x: 210, y: 260 };\r\n        const tweenB = new TWEEN.Tween(coordsB) // Create a new tween that modifies 'coords'.\r\n            .to({ x: 30, y: dock.id * 105 + ((dock.id - 1) * 15) }, 4000) // Move to (300, 200) in 1 second.\r\n            .onUpdate(() => {\r\n            shipElement.x = coordsB.x, shipElement.y = coordsB.y;\r\n        })\r\n            .easing(TWEEN.Easing.Quadratic.Out)\r\n            .onComplete(() => {\r\n            // console.log('onComplete');\r\n            filled ? overload(full_Red, filled) : overload(full_Green, filled);\r\n            tweenC.delay(5000);\r\n            setTimeout(() => {\r\n                if (filled) {\r\n                    docksState.forEach(e => { if (e.id === (dock === null || dock === void 0 ? void 0 : dock.id)) {\r\n                        e.filled = true;\r\n                        e.isBusy = false;\r\n                    } });\r\n                }\r\n                else {\r\n                    docksState.forEach(e => { if (e.id === (dock === null || dock === void 0 ? void 0 : dock.id)) {\r\n                        e.filled = false;\r\n                        e.isBusy = false;\r\n                    } });\r\n                }\r\n                switch (dock.id) {\r\n                    case 1:\r\n                        filled ? dock1.tint = 0xe3e344 : dock1.tint = 0xffffff;\r\n                        break;\r\n                    case 2:\r\n                        filled ? dock2.tint = 0xe3e344 : dock2.tint = 0xffffff;\r\n                        break;\r\n                    case 3:\r\n                        filled ? dock3.tint = 0xe3e344 : dock3.tint = 0xffffff;\r\n                        break;\r\n                    case 4:\r\n                        filled ? dock4.tint = 0xe3e344 : dock4.tint = 0xffffff;\r\n                        break;\r\n                    default:\r\n                        break;\r\n                }\r\n            }, 5000);\r\n            // tweenC.start()\r\n        });\r\n        const coordsC = { x: 30, y: dock.id * 105 + ((dock.id - 1) * 15) };\r\n        const tweenC = new TWEEN.Tween(coordsC) // Create a new tween that modifies 'coords'.\r\n            .to({ x: 170, y: 295 }, 2000) // Move to (300, 200) in 1 second.\r\n            .onUpdate(() => {\r\n            shipElement.x = coordsC.x, shipElement.y = coordsC.y;\r\n        });\r\n        const coordsD = { x: 170, y: 295 };\r\n        const tweenD = new TWEEN.Tween(coordsD) // Create a new tween that modifies 'coords'.\r\n            .to({ x: 810, y: 295 }, 4000) // Move to (300, 200) in 1 second.\r\n            .onUpdate(() => {\r\n            shipElement.x = coordsD.x, shipElement.y = coordsD.y;\r\n        });\r\n        tweenA.chain(tweenB);\r\n        tweenB.chain(tweenC);\r\n        tweenC.chain(tweenD);\r\n        tweenA.start();\r\n    }\r\n    else {\r\n        const coordsA = { x: 810, y: 300 }; // Start at (0, 0)\r\n        const tweenA = new TWEEN.Tween(coordsA) // Create a new tween that modifies 'coords'.\r\n            .to({ x: (shipsState.filter(ship => ship.waiting).length * 80 - 80) + 220, y: currentShip.filled ? 220 : 350 }, 6000) // Move to (300, 200) in 1 second.\r\n            .easing(TWEEN.Easing.Quadratic.Out)\r\n            .onUpdate(() => {\r\n            shipElement.x = coordsA.x, shipElement.y = coordsA.y;\r\n        }).onComplete(() => {\r\n            app.ticker.add(() => {\r\n                if (shipsState.find(e => e.id === currentShip.id && e.numberInLine === 1)) {\r\n                    const freeDock = getDock(filled);\r\n                    if (!!freeDock) {\r\n                        shipsState.forEach(e => { if (e.id === shipId) {\r\n                            e.waiting = false;\r\n                            e.numberInLine = 0;\r\n                        } });\r\n                        onShipWithLine(shipElement, freeDock, filled, full_Red, full_Green);\r\n                        const shipsInLineNow = shipsState.filter(e => e.waiting === true && e.filled === !freeDock.filled);\r\n                        for (let i = 0; i < shipsInLineNow.length; i++) {\r\n                            changePlaceInLine(shipsInLineNow[i].shipContainer, shipsInLineNow[i]);\r\n                        }\r\n                    }\r\n                }\r\n            });\r\n        });\r\n        tweenA.start();\r\n    }\r\n}\r\n// Setup the animation loop.\r\nfunction animate(time) {\r\n    requestAnimationFrame(animate);\r\n    TWEEN.update(time);\r\n}\r\nrequestAnimationFrame(animate);\r\nconst throttleCreateShip = throttle(createStartShip, 8000);\r\napp.ticker.add((delta) => {\r\n    throttleCreateShip();\r\n});\r\n// setInterval(() => {\r\n//     const arr = shipsState.filter(e => e.waiting === true)\r\n//     if (arr.length > 0)\r\n//         console.table(arr)\r\n// }, 2000);\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvaW5kZXgudHMuanMiLCJzb3VyY2VzIjpbIkQ6XFxXZWItQWktU3R1ZGlvXFx0ZXN0LW9uc2VvXzF2XFxzcmNcXGluZGV4LnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCAqIGFzIFBJWEkgZnJvbSAncGl4aS5qcyc7XG52YXIgdGhyb3R0bGUgPSByZXF1aXJlKCdsb2Rhc2gudGhyb3R0bGUnKTtcbmNvbnN0IFRXRUVOID0gcmVxdWlyZSgnQHR3ZWVuanMvdHdlZW4uanMnKVxuXG5pbnRlcmZhY2UgU2hpcHMge1xuICAgIGlkOiBudW1iZXI7XG4gICAgZmlsbGVkOiBib29sZWFuO1xuICAgIGNvbG9yOiBzdHJpbmc7XG4gICAgd2FpdGluZzogYm9vbGVhbjtcbiAgICBudW1iZXJJbkxpbmU6IG51bWJlcjtcbiAgICBzaGlwQ29udGFpbmVyOiBQSVhJLkNvbnRhaW5lcjtcbn1cbmludGVyZmFjZSBEb2NrIHtcbiAgICBpZDogbnVtYmVyO1xuICAgIG5hbWU6IHN0cmluZztcbiAgICBmaWxsZWQ6IGJvb2xlYW47XG4gICAgYmVydGhDb29yZGluYXRlczogeyB4OiBudW1iZXIsIHk6IG51bWJlciB9O1xuICAgIGlzQnVzeTogYm9vbGVhbjtcbn1cblxubGV0IGRvY2tzU3RhdGU6IERvY2tbXSA9IFtcbiAgICB7XG4gICAgICAgIGlkOiAxLFxuICAgICAgICBuYW1lOiBcImRvY2sxXCIsXG4gICAgICAgIGZpbGxlZDogZmFsc2UsXG4gICAgICAgIGJlcnRoQ29vcmRpbmF0ZXM6IHsgeDogMzAsIHk6IDEwNSB9LFxuICAgICAgICBpc0J1c3k6IGZhbHNlXG4gICAgfSxcbiAgICB7XG4gICAgICAgIGlkOiAyLFxuICAgICAgICBuYW1lOiBcImRvY2syXCIsXG4gICAgICAgIGZpbGxlZDogZmFsc2UsXG4gICAgICAgIGJlcnRoQ29vcmRpbmF0ZXM6IHsgeDogMzAsIHk6IDIyNSB9LFxuICAgICAgICBpc0J1c3k6IGZhbHNlXG4gICAgfSxcbiAgICB7XG4gICAgICAgIGlkOiAzLFxuICAgICAgICBuYW1lOiBcImRvY2szXCIsXG4gICAgICAgIGZpbGxlZDogZmFsc2UsXG4gICAgICAgIGJlcnRoQ29vcmRpbmF0ZXM6IHsgeDogMzAsIHk6IDM0NSB9LFxuICAgICAgICBpc0J1c3k6IGZhbHNlXG4gICAgfSxcbiAgICB7XG4gICAgICAgIGlkOiA0LFxuICAgICAgICBuYW1lOiBcImRvY2s0XCIsXG4gICAgICAgIGZpbGxlZDogZmFsc2UsXG4gICAgICAgIGJlcnRoQ29vcmRpbmF0ZXM6IHsgeDogMzAsIHk6IDQ2NSB9LFxuICAgICAgICBpc0J1c3k6IGZhbHNlXG4gICAgfVxuXVxubGV0IHNoaXBzU3RhdGU6IFNoaXBzW10gPSBbXVxuXG5mdW5jdGlvbiBnZXREb2NrKGZpbGxlZDogYm9vbGVhbikge1xuICAgIGNvbnN0IGRvY2sgPSBkb2Nrc1N0YXRlLmZpbHRlcihlID0+ICFlLmlzQnVzeSlcbiAgICAvLyBjb25zb2xlLmxvZygnZG9ja0lzQnVzeTonLCBkb2NrLmxlbmd0aCk7XG4gICAgaWYgKGRvY2subGVuZ3RoID4gMCkge1xuICAgICAgICBjb25zdCBjdXJyZW50RG9jayA9IGZpbGxlZCA/IGRvY2suZmluZChlID0+IGUuZmlsbGVkID09PSBmYWxzZSkgOiBkb2NrLmZpbmQoZSA9PiBlLmZpbGxlZCA9PT0gdHJ1ZSlcbiAgICAgICAgLy8gY29uc29sZS5sb2coJ2N1cnJlbnREb2NrOicsIGN1cnJlbnREb2NrKTtcbiAgICAgICAgZG9ja3NTdGF0ZSA9IGRvY2tzU3RhdGUubWFwKGUgPT4geyBpZiAoZS5pZCA9PT0gY3VycmVudERvY2s/LmlkKSB7IHJldHVybiB7IC4uLmN1cnJlbnREb2NrLCBpc0J1c3k6IHRydWUgfSB9IGVsc2UgcmV0dXJuIGUgfSlcbiAgICAgICAgcmV0dXJuIGN1cnJlbnREb2NrXG4gICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZFxuICAgIH1cbn1cbi8vIGZ1bmN0aW9uIHRlc3RGb3JBQUJCKG9iamVjdDE6IFBJWEkuR3JhcGhpY3MsIG9iamVjdDI6IFBJWEkuR3JhcGhpY3MpIHtcbi8vICAgICBjb25zdCBib3VuZHMxID0gb2JqZWN0MS5nZXRCb3VuZHMoKTtcbi8vICAgICBjb25zdCBib3VuZHMyID0gb2JqZWN0Mi5nZXRCb3VuZHMoKTtcblxuLy8gICAgIHJldHVybiBib3VuZHMxLnggPCBib3VuZHMyLnggKyBib3VuZHMyLndpZHRoICsgMVxuLy8gICAgICAgICAmJiBib3VuZHMxLnggKyBib3VuZHMxLndpZHRoICsgMSA+IGJvdW5kczIueFxuLy8gICAgICAgICAmJiBib3VuZHMxLnkgPCBib3VuZHMyLnkgKyBib3VuZHMyLmhlaWdodFxuLy8gICAgICAgICAmJiBib3VuZHMxLnkgKyBib3VuZHMxLmhlaWdodCA+IGJvdW5kczIueTtcbi8vIH1cblxubGV0IGFwcCA9IG5ldyBQSVhJLkFwcGxpY2F0aW9uKHsgd2lkdGg6IDgwMCwgaGVpZ2h0OiA2MDAsIGJhY2tncm91bmRDb2xvcjogMHgzYTU2ZjIgfSk7XG5kb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGFwcC52aWV3KVxuXG5jb25zdCBkb2NrMSA9IG5ldyBQSVhJLkdyYXBoaWNzKClcbmRvY2sxLmxpbmVTdHlsZSg1LCAweGUzZTM0NCwgMSlcbmRvY2sxLmJlZ2luRmlsbChkb2Nrc1N0YXRlLmZpbmQoZSA9PiBlLmlkID09PSAxKT8uZmlsbGVkID8gMHhlM2UzNDQgOiAweDNhNTZmMilcbmRvY2sxLmRyYXdSZWN0KDMsIDIsIDI1LCAxMDApXG5kb2NrMS55ID0gNzBcbmRvY2sxLmVuZEZpbGwoKVxuYXBwLnN0YWdlLmFkZENoaWxkKGRvY2sxKVxuXG5jb25zdCBkb2NrMiA9IG5ldyBQSVhJLkdyYXBoaWNzKClcbmRvY2syLmxpbmVTdHlsZSg1LCAweGUzZTM0NCwgMSlcbmRvY2syLmJlZ2luRmlsbChkb2Nrc1N0YXRlLmZpbmQoZSA9PiBlLmlkID09PSAyKT8uZmlsbGVkID8gMHhlM2UzNDQgOiAweDNhNTZmMilcbmRvY2syLmRyYXdSZWN0KDMsIDIsIDI1LCAxMDApXG5kb2NrMi55ID0gMTkwXG5kb2NrMi5lbmRGaWxsKClcbmFwcC5zdGFnZS5hZGRDaGlsZChkb2NrMilcblxuY29uc3QgZG9jazMgPSBuZXcgUElYSS5HcmFwaGljcygpXG5kb2NrMy5saW5lU3R5bGUoNSwgMHhlM2UzNDQsIDEpXG5kb2NrMy5iZWdpbkZpbGwoZG9ja3NTdGF0ZS5maW5kKGUgPT4gZS5pZCA9PT0gMyk/LmZpbGxlZCA/IDB4ZTNlMzQ0IDogMHgzYTU2ZjIpXG5kb2NrMy5kcmF3UmVjdCgzLCAyLCAyNSwgMTAwKVxuZG9jazMueSA9IDMxMFxuZG9jazMuZW5kRmlsbCgpXG5hcHAuc3RhZ2UuYWRkQ2hpbGQoZG9jazMpXG5cbmNvbnN0IGRvY2s0ID0gbmV3IFBJWEkuR3JhcGhpY3MoKVxuZG9jazQubGluZVN0eWxlKDUsIDB4ZTNlMzQ0LCAxKVxuZG9jazQuYmVnaW5GaWxsKGRvY2tzU3RhdGUuZmluZChlID0+IGUuaWQgPT09IDQpPy5maWxsZWQgPyAweGUzZTM0NCA6IDB4M2E1NmYyKVxuZG9jazQuZHJhd1JlY3QoMywgMiwgMjUsIDEwMClcbmRvY2s0LnkgPSA0MzBcbmRvY2s0LmVuZEZpbGwoKVxuYXBwLnN0YWdlLmFkZENoaWxkKGRvY2s0KVxuXG5jb25zdCB3YWxsXzEgPSBuZXcgUElYSS5HcmFwaGljcygpXG53YWxsXzEubGluZVN0eWxlKDAsIDB4ZTNlMzQ0LCAxKVxud2FsbF8xLmJlZ2luRmlsbCgweGUzZTM0NClcbndhbGxfMS5kcmF3UmVjdCgyMDAsIDAsIDEwLCAyMDApXG53YWxsXzEuZW5kRmlsbCgpXG5hcHAuc3RhZ2UuYWRkQ2hpbGQod2FsbF8xKVxuXG5jb25zdCB3YWxsXzIgPSBuZXcgUElYSS5HcmFwaGljcygpXG53YWxsXzIubGluZVN0eWxlKDAsIDB4ZTNlMzQ0LCAxKVxud2FsbF8yLmJlZ2luRmlsbCgweGUzZTM0NClcbndhbGxfMi5kcmF3UmVjdCgyMDAsIDQwMCwgMTAsIDIwMClcbndhbGxfMi5lbmRGaWxsKClcbmFwcC5zdGFnZS5hZGRDaGlsZCh3YWxsXzIpXG5cbmZ1bmN0aW9uIG9uU2hpcFdpdGhMaW5lKHNoaXA6IFBJWEkuQ29udGFpbmVyLCBkb2NrOiBEb2NrLCBzaGlwRmlsbGVkOiBib29sZWFuLCByZWQ6IFBJWEkuU3ByaXRlLCBncmVlbjogUElYSS5TcHJpdGUpIHtcbiAgICBjb25zdCBjb29yZHNDID0geyB4OiAyMjAsIHk6IHNoaXBGaWxsZWQgPyAyMjAgOiAzNTAgfVxuICAgIGNvbnN0IHR3ZWVuQyA9IG5ldyBUV0VFTi5Ud2Vlbihjb29yZHNDKVxuICAgICAgICAudG8oeyB4OiAzMCwgeTogZG9jay5pZCAqIDEwNSArICgoZG9jay5pZCAtIDEpICogMTUpIH0sIDQwMDApXG4gICAgICAgIC5vblVwZGF0ZSgoKSA9PiB7XG4gICAgICAgICAgICBzaGlwLnggPSBjb29yZHNDLngsIHNoaXAueSA9IGNvb3Jkc0MueVxuICAgICAgICB9KVxuICAgICAgICAub25Db21wbGV0ZSgoKSA9PiB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZygnb25Db21wbGV0ZScpO1xuICAgICAgICAgICAgLy8gZG9ja0Nvb3JkID0gZG9ja3NbZG9jay5pZCAtIDFdLmJlcnRoQ29vcmRpbmF0ZXNcbiAgICAgICAgICAgIHNoaXBGaWxsZWQgPyBvdmVybG9hZChyZWQsIHNoaXBGaWxsZWQpIDogb3ZlcmxvYWQoZ3JlZW4sIHNoaXBGaWxsZWQpXG4gICAgICAgICAgICB0d2VlbkQuZGVsYXkoNTAwMClcbiAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgICAgIGlmIChzaGlwRmlsbGVkKSB7XG4gICAgICAgICAgICAgICAgICAgIGRvY2tzU3RhdGUuZm9yRWFjaChlID0+IHsgaWYgKGUuaWQgPT09IGRvY2suaWQpIHsgZS5maWxsZWQgPSB0cnVlOyBlLmlzQnVzeSA9IGZhbHNlIH0gfSlcblxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgZG9ja3NTdGF0ZS5mb3JFYWNoKGUgPT4geyBpZiAoZS5pZCA9PT0gZG9jay5pZCkgeyBlLmZpbGxlZCA9IGZhbHNlOyBlLmlzQnVzeSA9IGZhbHNlIH0gfSlcblxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBzd2l0Y2ggKGRvY2suaWQpIHtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgICAgICAgICAgICAgc2hpcEZpbGxlZCA/IGRvY2sxLnRpbnQgPSAweGUzZTM0NCA6IGRvY2sxLnRpbnQgPSAweGZmZmZmZlxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgICAgICAgICAgICAgIHNoaXBGaWxsZWQgPyBkb2NrMi50aW50ID0gMHhlM2UzNDQgOiBkb2NrMi50aW50ID0gMHhmZmZmZmZcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDM6XG4gICAgICAgICAgICAgICAgICAgICAgICBzaGlwRmlsbGVkID8gZG9jazMudGludCA9IDB4ZTNlMzQ0IDogZG9jazMudGludCA9IDB4ZmZmZmZmXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSA0OlxuICAgICAgICAgICAgICAgICAgICAgICAgc2hpcEZpbGxlZCA/IGRvY2s0LnRpbnQgPSAweGUzZTM0NCA6IGRvY2s0LnRpbnQgPSAweGZmZmZmZlxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LCA1MDAwKTtcbiAgICAgICAgfSlcbiAgICBjb25zdCBjb29yZHNEID0geyB4OiAzMCwgeTogZG9jay5pZCAqIDEwNSArICgoZG9jay5pZCAtIDEpICogMTUpIH1cbiAgICBjb25zdCB0d2VlbkQgPSBuZXcgVFdFRU4uVHdlZW4oY29vcmRzRClcbiAgICAgICAgLnRvKHsgeDogMTcwLCB5OiAyOTUgfSwgMjAwMClcbiAgICAgICAgLm9uVXBkYXRlKCgpID0+IHtcbiAgICAgICAgICAgIHNoaXAueCA9IGNvb3Jkc0QueCwgc2hpcC55ID0gY29vcmRzRC55XG4gICAgICAgIH0pXG4gICAgY29uc3QgY29vcmRzRSA9IHsgeDogMTcwLCB5OiAyOTUgfVxuICAgIGNvbnN0IHR3ZWVuRSA9IG5ldyBUV0VFTi5Ud2Vlbihjb29yZHNFKVxuICAgICAgICAudG8oeyB4OiA4MTAsIHk6IDI5NSB9LCA0MDAwKVxuICAgICAgICAub25VcGRhdGUoKCkgPT4ge1xuICAgICAgICAgICAgc2hpcC54ID0gY29vcmRzRS54LCBzaGlwLnkgPSBjb29yZHNFLnlcbiAgICAgICAgfSlcblxuICAgIC8vIHR3ZWVuQi5jaGFpbih0d2VlbkMpXG4gICAgdHdlZW5DLmNoYWluKHR3ZWVuRClcbiAgICB0d2VlbkQuY2hhaW4odHdlZW5FKVxuICAgIHR3ZWVuQy5zdGFydCgpXG5cbn1cblxuZnVuY3Rpb24gY2hhbmdlUGxhY2VJbkxpbmUoc2hpcDogUElYSS5Db250YWluZXIsIHNoaXBPYmo6IFNoaXBzKSB7XG4gICAgc2hpcHNTdGF0ZS5mb3JFYWNoKGUgPT4geyBpZiAoZS5pZCA9PT0gc2hpcE9iai5pZCkgeyBlLm51bWJlckluTGluZSA9IHNoaXBPYmoubnVtYmVySW5MaW5lIC0gMSB9IH0pXG4gICAgY29uc3QgY29vcmRzQSA9IHsgeDogc2hpcE9iai5udW1iZXJJbkxpbmUgKiA4MCArIDIyMCB9XG4gICAgY29uc3QgdHdlZW5BID0gbmV3IFRXRUVOLlR3ZWVuKGNvb3Jkc0EpXG4gICAgICAgIC50byh7IHg6IChzaGlwT2JqLm51bWJlckluTGluZSAqIDgwICsgMjIwKSAtIDgwIH0sIDEwMDApXG4gICAgICAgIC5vblVwZGF0ZSgoKSA9PiB7XG4gICAgICAgICAgICBzaGlwLnggPSBjb29yZHNBLnhcbiAgICAgICAgfSkuZGVsYXkoMTAwMCkub25Db21wbGV0ZSgoKSA9PiB7XG4gICAgICAgIH0pXG4gICAgdHdlZW5BLnN0YXJ0KClcbn1cblxuZGVjbGFyZSBnbG9iYWwge1xuICAgIGludGVyZmFjZSBXaW5kb3cge1xuICAgICAgICBhcGk/OiBhbnk7XG4gICAgfVxufVxuZnVuY3Rpb24gb3ZlcmxvYWQocGFyYW1zOiBQSVhJLlNwcml0ZSwgZmlsbGVkOiBib29sZWFuKSB7XG4gICAgY29uc3Qgc2l6ZSA9IHsgczogZmlsbGVkID8gNjAgOiAwIH1cbiAgICBjb25zdCB0d2VlbiA9IG5ldyBUV0VFTi5Ud2VlbihzaXplKSAvLyBDcmVhdGUgYSBuZXcgdHdlZW4gdGhhdCBtb2RpZmllcyAnY29vcmRzJy5cbiAgICAgICAgLnRvKHsgczogZmlsbGVkID8gMCA6IDYwIH0sIDUwMDApIC8vIE1vdmUgdG8gKDMwMCwgMjAwKSBpbiAxIHNlY29uZC5cbiAgICAgICAgLm9uVXBkYXRlKCgpID0+IHtcbiAgICAgICAgICAgIHBhcmFtcy53aWR0aCA9IHNpemUuc1xuICAgICAgICB9KVxuICAgIHR3ZWVuLnN0YXJ0KClcblxufVxuXG5cbmZ1bmN0aW9uIGNyZWF0ZVN0YXJ0U2hpcCgpIHtcbiAgICBjb25zdCBmaWxsZWQgPSAhIU1hdGgucm91bmQoTWF0aC5yYW5kb20oKSlcbiAgICBjb25zdCBzaGlwSWQgPSBzaGlwc1N0YXRlLmxlbmd0aCArIDFcbiAgICBjb25zdCBkb2NrID0gZ2V0RG9jayhmaWxsZWQpXG4gICAgY29uc3Qgc2hpcEVsZW1lbnQgPSBuZXcgUElYSS5Db250YWluZXIoKTtcbiAgICBzaGlwRWxlbWVudC5wb3NpdGlvbiA9IG5ldyBQSVhJLlBvaW50KDgxMCwgMzAwKTtcbiAgICBhcHAuc3RhZ2UuYWRkQ2hpbGQoc2hpcEVsZW1lbnQpO1xuICAgIGNvbnN0IGVtcHR5X0dyZWVuID0gUElYSS5TcHJpdGUuZnJvbSgnLi4vYXNzZXRzL2ltYWdlcy9ncmVlbi1zaGlwLWVtcHR5LnBuZycpO1xuICAgIGVtcHR5X0dyZWVuLndpZHRoID0gNjA7XG4gICAgZW1wdHlfR3JlZW4uaGVpZ2h0ID0gMzA7XG4gICAgY29uc3QgZnVsbF9HcmVlbiA9IFBJWEkuU3ByaXRlLmZyb20oJy4uL2Fzc2V0cy9pbWFnZXMvZ3JlZW4tc2hpcC1mdWxsLnBuZycpO1xuICAgIGZ1bGxfR3JlZW4ud2lkdGggPSAwO1xuICAgIGZ1bGxfR3JlZW4uaGVpZ2h0ID0gMzA7XG4gICAgY29uc3QgZW1wdHlfUmVkID0gUElYSS5TcHJpdGUuZnJvbSgnLi4vYXNzZXRzL2ltYWdlcy9yZWQtc2hpcC1lbXB0eS5wbmcnKTtcbiAgICBlbXB0eV9SZWQud2lkdGggPSA2MDtcbiAgICBlbXB0eV9SZWQuaGVpZ2h0ID0gMzA7XG4gICAgY29uc3QgZnVsbF9SZWQgPSBQSVhJLlNwcml0ZS5mcm9tKCcuLi9hc3NldHMvaW1hZ2VzL3JlZC1zaGlwLWZ1bGwucG5nJyk7XG4gICAgZnVsbF9SZWQud2lkdGggPSA2MDtcbiAgICBmdWxsX1JlZC5oZWlnaHQgPSAzMDtcbiAgICBpZiAoZmlsbGVkKSB7XG4gICAgICAgIHNoaXBFbGVtZW50LmFkZENoaWxkKGVtcHR5X1JlZCk7XG4gICAgICAgIHNoaXBFbGVtZW50LmFkZENoaWxkKGZ1bGxfUmVkKTtcbiAgICB9IGVsc2Uge1xuICAgICAgICBzaGlwRWxlbWVudC5hZGRDaGlsZChlbXB0eV9HcmVlbik7XG4gICAgICAgIHNoaXBFbGVtZW50LmFkZENoaWxkKGZ1bGxfR3JlZW4pO1xuXG4gICAgfVxuXG4gICAgY29uc3QgY3VycmVudFNoaXAgPSB7XG4gICAgICAgIGlkOiBzaGlwSWQsXG4gICAgICAgIGZpbGxlZDogZmlsbGVkLFxuICAgICAgICBjb2xvcjogZmlsbGVkID8gJ3JlZCcgOiAnZ3JlZW4nLFxuICAgICAgICB3YWl0aW5nOiAhZG9jayxcbiAgICAgICAgbnVtYmVySW5MaW5lOiAhIWRvY2sgPyAwIDogc2hpcHNTdGF0ZS5maWx0ZXIoc2hpcCA9PiBzaGlwLndhaXRpbmcgPT0gdHJ1ZSAmJiBzaGlwLmZpbGxlZCA9PT0gZmlsbGVkKS5sZW5ndGggKyAxLFxuICAgICAgICBzaGlwQ29udGFpbmVyOiBzaGlwRWxlbWVudFxuICAgIH1cbiAgICAvLyBjb25zb2xlLnRhYmxlKGN1cnJlbnRTaGlwKVxuICAgIHNoaXBzU3RhdGUucHVzaChjdXJyZW50U2hpcClcbiAgICAvLyBjb25zb2xlLmxvZygnZ2V0SW5MaW5lKGZpbGxlZCk6JywgZ2V0SW5MaW5lKGZpbGxlZCkpO1xuICAgIC8vIGNvbnNvbGUubG9nKCdzaGlwc1N0YXRlLXdhaXRpbmc6Jywgc2hpcHNTdGF0ZS5maWx0ZXIoc2hpcCA9PiBzaGlwLndhaXRpbmcpLmxlbmd0aCk7XG4gICAgLy8gY29uc29sZS5sb2coISFkb2NrKTtcblxuICAgIGlmICghIWRvY2spIHtcbiAgICAgICAgY29uc3QgY29vcmRzQSA9IHsgeDogODEwLCB5OiAyNjAgfSAvLyBTdGFydCBhdCAoMCwgMClcbiAgICAgICAgY29uc3QgdHdlZW5BID0gbmV3IFRXRUVOLlR3ZWVuKGNvb3Jkc0EpIC8vIENyZWF0ZSBhIG5ldyB0d2VlbiB0aGF0IG1vZGlmaWVzICdjb29yZHMnLlxuICAgICAgICAgICAgLnRvKHsgeDogMjEwLCB5OiAyNjAgfSwgNjAwMCkgLy8gTW92ZSB0byAoMzAwLCAyMDApIGluIDEgc2Vjb25kLlxuICAgICAgICAgICAgLy8gLmVhc2luZyhUV0VFTi5FYXNpbmcuUXVhZHJhdGljLk91dClcbiAgICAgICAgICAgIC5vblVwZGF0ZSgoKSA9PiB7XG4gICAgICAgICAgICAgICAgc2hpcEVsZW1lbnQueCA9IGNvb3Jkc0EueCwgc2hpcEVsZW1lbnQueSA9IGNvb3Jkc0EueVxuICAgICAgICAgICAgfSlcbiAgICAgICAgY29uc3QgY29vcmRzQiA9IHsgeDogMjEwLCB5OiAyNjAgfVxuICAgICAgICBjb25zdCB0d2VlbkIgPSBuZXcgVFdFRU4uVHdlZW4oY29vcmRzQikgLy8gQ3JlYXRlIGEgbmV3IHR3ZWVuIHRoYXQgbW9kaWZpZXMgJ2Nvb3JkcycuXG4gICAgICAgICAgICAudG8oeyB4OiAzMCwgeTogZG9jay5pZCAqIDEwNSArICgoZG9jay5pZCAtIDEpICogMTUpIH0sIDQwMDApIC8vIE1vdmUgdG8gKDMwMCwgMjAwKSBpbiAxIHNlY29uZC5cbiAgICAgICAgICAgIC5vblVwZGF0ZSgoKSA9PiB7XG4gICAgICAgICAgICAgICAgc2hpcEVsZW1lbnQueCA9IGNvb3Jkc0IueCwgc2hpcEVsZW1lbnQueSA9IGNvb3Jkc0IueVxuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIC5lYXNpbmcoVFdFRU4uRWFzaW5nLlF1YWRyYXRpYy5PdXQpXG4gICAgICAgICAgICAub25Db21wbGV0ZSgoKSA9PiB7XG4gICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coJ29uQ29tcGxldGUnKTtcbiAgICAgICAgICAgICAgICBmaWxsZWQgPyBvdmVybG9hZChmdWxsX1JlZCwgZmlsbGVkKSA6IG92ZXJsb2FkKGZ1bGxfR3JlZW4sIGZpbGxlZClcbiAgICAgICAgICAgICAgICB0d2VlbkMuZGVsYXkoNTAwMClcbiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGZpbGxlZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZG9ja3NTdGF0ZS5mb3JFYWNoKGUgPT4geyBpZiAoZS5pZCA9PT0gZG9jaz8uaWQpIHsgZS5maWxsZWQgPSB0cnVlOyBlLmlzQnVzeSA9IGZhbHNlIH0gfSlcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRvY2tzU3RhdGUuZm9yRWFjaChlID0+IHsgaWYgKGUuaWQgPT09IGRvY2s/LmlkKSB7IGUuZmlsbGVkID0gZmFsc2U7IGUuaXNCdXN5ID0gZmFsc2UgfSB9KVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHN3aXRjaCAoZG9jay5pZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpbGxlZCA/IGRvY2sxLnRpbnQgPSAweGUzZTM0NCA6IGRvY2sxLnRpbnQgPSAweGZmZmZmZlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAyOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpbGxlZCA/IGRvY2syLnRpbnQgPSAweGUzZTM0NCA6IGRvY2syLnRpbnQgPSAweGZmZmZmZlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAzOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpbGxlZCA/IGRvY2szLnRpbnQgPSAweGUzZTM0NCA6IGRvY2szLnRpbnQgPSAweGZmZmZmZlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA0OlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpbGxlZCA/IGRvY2s0LnRpbnQgPSAweGUzZTM0NCA6IGRvY2s0LnRpbnQgPSAweGZmZmZmZlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0sIDUwMDApO1xuICAgICAgICAgICAgICAgIC8vIHR3ZWVuQy5zdGFydCgpXG4gICAgICAgICAgICB9KVxuXG4gICAgICAgIGNvbnN0IGNvb3Jkc0MgPSB7IHg6IDMwLCB5OiBkb2NrLmlkICogMTA1ICsgKChkb2NrLmlkIC0gMSkgKiAxNSkgfVxuICAgICAgICBjb25zdCB0d2VlbkMgPSBuZXcgVFdFRU4uVHdlZW4oY29vcmRzQykgLy8gQ3JlYXRlIGEgbmV3IHR3ZWVuIHRoYXQgbW9kaWZpZXMgJ2Nvb3JkcycuXG4gICAgICAgICAgICAudG8oeyB4OiAxNzAsIHk6IDI5NSB9LCAyMDAwKSAvLyBNb3ZlIHRvICgzMDAsIDIwMCkgaW4gMSBzZWNvbmQuXG4gICAgICAgICAgICAub25VcGRhdGUoKCkgPT4ge1xuICAgICAgICAgICAgICAgIHNoaXBFbGVtZW50LnggPSBjb29yZHNDLngsIHNoaXBFbGVtZW50LnkgPSBjb29yZHNDLnlcbiAgICAgICAgICAgIH0pXG4gICAgICAgIGNvbnN0IGNvb3Jkc0QgPSB7IHg6IDE3MCwgeTogMjk1IH1cbiAgICAgICAgY29uc3QgdHdlZW5EID0gbmV3IFRXRUVOLlR3ZWVuKGNvb3Jkc0QpIC8vIENyZWF0ZSBhIG5ldyB0d2VlbiB0aGF0IG1vZGlmaWVzICdjb29yZHMnLlxuICAgICAgICAgICAgLnRvKHsgeDogODEwLCB5OiAyOTUgfSwgNDAwMCkgLy8gTW92ZSB0byAoMzAwLCAyMDApIGluIDEgc2Vjb25kLlxuICAgICAgICAgICAgLm9uVXBkYXRlKCgpID0+IHtcbiAgICAgICAgICAgICAgICBzaGlwRWxlbWVudC54ID0gY29vcmRzRC54LCBzaGlwRWxlbWVudC55ID0gY29vcmRzRC55XG4gICAgICAgICAgICB9KVxuXG4gICAgICAgIHR3ZWVuQS5jaGFpbih0d2VlbkIpXG4gICAgICAgIHR3ZWVuQi5jaGFpbih0d2VlbkMpXG4gICAgICAgIHR3ZWVuQy5jaGFpbih0d2VlbkQpXG4gICAgICAgIHR3ZWVuQS5zdGFydCgpXG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBjb25zdCBjb29yZHNBID0geyB4OiA4MTAsIHk6IDMwMCB9IC8vIFN0YXJ0IGF0ICgwLCAwKVxuICAgICAgICBjb25zdCB0d2VlbkEgPSBuZXcgVFdFRU4uVHdlZW4oY29vcmRzQSkgLy8gQ3JlYXRlIGEgbmV3IHR3ZWVuIHRoYXQgbW9kaWZpZXMgJ2Nvb3JkcycuXG4gICAgICAgICAgICAudG8oeyB4OiAoc2hpcHNTdGF0ZS5maWx0ZXIoc2hpcCA9PiBzaGlwLndhaXRpbmcpLmxlbmd0aCAqIDgwIC0gODApICsgMjIwLCB5OiBjdXJyZW50U2hpcC5maWxsZWQgPyAyMjAgOiAzNTAgfSwgNjAwMCkgLy8gTW92ZSB0byAoMzAwLCAyMDApIGluIDEgc2Vjb25kLlxuICAgICAgICAgICAgLmVhc2luZyhUV0VFTi5FYXNpbmcuUXVhZHJhdGljLk91dClcbiAgICAgICAgICAgIC5vblVwZGF0ZSgoKSA9PiB7XG4gICAgICAgICAgICAgICAgc2hpcEVsZW1lbnQueCA9IGNvb3Jkc0EueCwgc2hpcEVsZW1lbnQueSA9IGNvb3Jkc0EueVxuICAgICAgICAgICAgfSkub25Db21wbGV0ZSgoKSA9PiB7XG4gICAgICAgICAgICAgICAgYXBwLnRpY2tlci5hZGQoKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBpZiAoc2hpcHNTdGF0ZS5maW5kKGUgPT4gZS5pZCA9PT0gY3VycmVudFNoaXAuaWQgJiYgZS5udW1iZXJJbkxpbmUgPT09IDEpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBmcmVlRG9jayA9IGdldERvY2soZmlsbGVkKVxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCEhZnJlZURvY2spIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzaGlwc1N0YXRlLmZvckVhY2goZSA9PiB7IGlmIChlLmlkID09PSBzaGlwSWQpIHsgZS53YWl0aW5nID0gZmFsc2U7IGUubnVtYmVySW5MaW5lID0gMCB9IH0pXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb25TaGlwV2l0aExpbmUoc2hpcEVsZW1lbnQsIGZyZWVEb2NrLCBmaWxsZWQsIGZ1bGxfUmVkLCBmdWxsX0dyZWVuKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHNoaXBzSW5MaW5lTm93ID0gc2hpcHNTdGF0ZS5maWx0ZXIoZSA9PiBlLndhaXRpbmcgPT09IHRydWUgJiYgZS5maWxsZWQgPT09ICFmcmVlRG9jay5maWxsZWQpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzaGlwc0luTGluZU5vdy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaGFuZ2VQbGFjZUluTGluZShzaGlwc0luTGluZU5vd1tpXS5zaGlwQ29udGFpbmVyLCBzaGlwc0luTGluZU5vd1tpXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIH0pXG4gICAgICAgIHR3ZWVuQS5zdGFydCgpXG4gICAgfVxufVxuXG5cblxuLy8gU2V0dXAgdGhlIGFuaW1hdGlvbiBsb29wLlxuZnVuY3Rpb24gYW5pbWF0ZSh0aW1lOiBhbnkpIHtcbiAgICByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoYW5pbWF0ZSlcbiAgICBUV0VFTi51cGRhdGUodGltZSlcbn1cbnJlcXVlc3RBbmltYXRpb25GcmFtZShhbmltYXRlKVxuXG5jb25zdCB0aHJvdHRsZUNyZWF0ZVNoaXAgPSB0aHJvdHRsZShjcmVhdGVTdGFydFNoaXAsIDgwMDApXG5hcHAudGlja2VyLmFkZCgoZGVsdGEpID0+IHtcbiAgICB0aHJvdHRsZUNyZWF0ZVNoaXAoKVxufSlcbi8vIHNldEludGVydmFsKCgpID0+IHtcbi8vICAgICBjb25zdCBhcnIgPSBzaGlwc1N0YXRlLmZpbHRlcihlID0+IGUud2FpdGluZyA9PT0gdHJ1ZSlcbi8vICAgICBpZiAoYXJyLmxlbmd0aCA+IDApXG4vLyAgICAgICAgIGNvbnNvbGUudGFibGUoYXJyKVxuLy8gfSwgMjAwMCk7XG5cbiJdLCJtYXBwaW5ncyI6Ijs7O0FBQUE7QUFDQTtBQUNBO0FBa0JBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBOztBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUVBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUVBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBT0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUVBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/index.ts\n");

/***/ })

})